import{d as U,x as k,h as T,o as m,w as i,b as o,a as s,e as u,t as n,i as E,c as _,f as c,u as r,S as Y}from"./app-BhTIdOYK.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-DGKJT_Zj.js";import{_ as B}from"./Heading.vue_vue_type_script_setup_true_lang-BuXFWkpZ.js";import{_ as x}from"./index-2AkCdJKP.js";import{_ as R,a as q}from"./CardContent.vue_vue_type_script_setup_true_lang-BoZ4VAyc.js";import{_ as N}from"./CardDescription.vue_vue_type_script_setup_true_lang-MVXfFEON.js";import{_ as P}from"./CardHeader.vue_vue_type_script_setup_true_lang-3y0ZCNU2.js";import{_ as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-C7_aJDBG.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-Dtln7o_m.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-DTa35QQo.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-BfK8qAhH.js";import{_ as w}from"./Icon.vue_vue_type_script_setup_true_lang-BhK1KHdo.js";import"./useForwardExpose-7A00SoGC.js";import"./RovingFocusGroup-kePly2kE.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BS3Ywdnq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DJStl9xA.js";import"./settings-MPfpgHFP.js";import"./users-BEFf-H3J.js";import"./graduation-cap-Bgq6H3Ja.js";import"./sparkles-CfV05rQS.js";import"./map-pin-Dkuy2i6M.js";import"./target-DtDWHqFi.js";import"./terminal-DMuHgjXI.js";import"./check-D0rDwM8i.js";import"./chevron-down-DdPLH-Aa.js";import"./clock-4p7B3Av1.js";import"./user-umeHmqrx.js";import"./construction-C_Iibcg5.js";import"./external-link-C1MKIwIj.js";import"./star-BWT557fB.js";import"./message-square-UW9z1lEp.js";import"./heart-V9T4F3aQ.js";import"./loader-circle-DdkV5UP3.js";import"./mail-blUrYpeZ.js";import"./sun-BxRUfR89.js";import"./wrench-CuLMVOZh.js";const A={class:"space-y-6 p-4"},D={class:"p-4 bg-muted rounded-lg"},L={class:"flex items-center gap-3"},M={class:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center"},j={class:"flex-1"},I={class:"font-medium"},Q={class:"text-sm text-muted-foreground"},Z={class:"flex flex-wrap -mx-2"},W={class:"w-full px-2 mb-4"},X={key:0,class:"text-sm text-red-600 mt-1"},F={key:0,class:"w-full px-2 mb-4"},G={class:"p-4 bg-muted rounded-lg"},H={class:"aspect-video bg-black rounded overflow-hidden"},J=["src"],K={class:"w-full sm:w-1/2 px-2 mb-4"},O={class:"w-full sm:w-1/2 px-2 mb-4"},tt={class:"w-full sm:w-1/2 px-2 mb-4"},et={class:"flex items-center gap-4"},ot={class:"text-sm text-muted-foreground"},st={key:0,class:"flex items-center gap-2 p-4 bg-muted rounded-lg"},rt={key:1,class:"p-4 bg-muted rounded-lg"},lt={class:"flex items-center gap-3"},it={class:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center"},ut={class:"flex-1"},at={class:"font-medium"},nt={class:"text-sm text-muted-foreground"},dt={class:"text-sm text-muted-foreground"},mt={class:"flex items-center gap-4"},Ft=U({__name:"Edit",props:{popularSong:{}},setup(h){const d=h,S=[{title:"Dashboard",href:"/dashboard"},{title:"Popular Songs",href:"/popular-songs"},{title:"Edit",href:`/backend/popular-songs/${d.popularSong.id}/edit`}],e=k({title:d.popularSong.title,artist:d.popularSong.artist,url:d.popularSong.url,duration:d.popularSong.duration}),f=l=>/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/.test(l),v=l=>{const t=l.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null},V=()=>{if(e.url&&!f(e.url)&&(e.url.includes("youtube.com")||e.url.includes("youtu.be"))){const l=v(e.url);l&&(e.url=`https://www.youtube.com/watch?v=${l}`)}},y=l=>{const t=Math.floor(l/60),a=l%60;return`${t}:${a.toString().padStart(2,"0")}`},$=()=>{e.put(route("backend.popular-songs.update",d.popularSong.id))};return(l,t)=>(m(),T(C,{breadcrumbs:S},{default:i(()=>[o("div",A,[o("div",null,[s(B,{title:"Edit Song"}),t[5]||(t[5]=o("p",{class:"text-sm text-muted-foreground"}," Update the song information in your music library ",-1))]),s(R,null,{default:i(()=>[s(P,null,{default:i(()=>[s(z,null,{default:i(()=>[u("Edit Song: "+n(l.popularSong.title),1)]),_:1}),s(N,null,{default:i(()=>t[6]||(t[6]=[u(" Update the song details below ")])),_:1,__:[6]})]),_:1}),s(q,null,{default:i(()=>[o("form",{onSubmit:E($,["prevent"]),class:"space-y-6"},[o("div",D,[t[8]||(t[8]=o("h4",{class:"font-medium mb-2"},"Current Song",-1)),o("div",L,[o("div",M,[s(w,{name:"music",class:"h-5 w-5 text-primary"})]),o("div",j,[o("p",I,n(l.popularSong.title),1),o("p",Q,n(l.popularSong.artist),1)]),s(x,{variant:"outline",size:"sm",onClick:t[0]||(t[0]=()=>l.window.open(l.popularSong.url,"_blank")),class:"flex items-center gap-2"},{default:i(()=>[s(w,{name:"external-link",class:"h-4 w-4"}),t[7]||(t[7]=u(" View on YouTube "))]),_:1,__:[7]})])]),o("div",Z,[o("div",W,[s(p,{for:"url"},{default:i(()=>t[9]||(t[9]=[u("YouTube URL *")])),_:1,__:[9]}),s(g,{id:"url",modelValue:r(e).url,"onUpdate:modelValue":t[1]||(t[1]=a=>r(e).url=a),type:"url",placeholder:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",onBlur:V,required:""},null,8,["modelValue"]),t[10]||(t[10]=o("p",{class:"text-sm text-muted-foreground mt-1"}," Enter a YouTube video URL. Supported formats: youtube.com/watch?v=, youtu.be/, youtube.com/embed/ ",-1)),r(e).url&&!f(r(e).url)?(m(),_("div",X," Please enter a valid YouTube URL ")):c("",!0),s(b,{message:r(e).errors.url},null,8,["message"])]),r(e).url&&f(r(e).url)?(m(),_("div",F,[s(p,null,{default:i(()=>t[11]||(t[11]=[u("YouTube Preview")])),_:1,__:[11]}),o("div",G,[o("div",H,[o("iframe",{src:`https://www.youtube.com/embed/${v(r(e).url)}?rel=0`,class:"w-full h-full",frameborder:"0",allowfullscreen:""},null,8,J)])])])):c("",!0),o("div",K,[s(p,{for:"title"},{default:i(()=>t[12]||(t[12]=[u("Song Title *")])),_:1,__:[12]}),s(g,{id:"title",modelValue:r(e).title,"onUpdate:modelValue":t[2]||(t[2]=a=>r(e).title=a),type:"text",placeholder:"Enter song title",required:"",autofocus:""},null,8,["modelValue"]),s(b,{message:r(e).errors.title},null,8,["message"])]),o("div",O,[s(p,{for:"artist"},{default:i(()=>t[13]||(t[13]=[u("Artist *")])),_:1,__:[13]}),s(g,{id:"artist",modelValue:r(e).artist,"onUpdate:modelValue":t[3]||(t[3]=a=>r(e).artist=a),type:"text",placeholder:"Enter artist name",required:""},null,8,["modelValue"]),s(b,{message:r(e).errors.artist},null,8,["message"])]),o("div",tt,[s(p,{for:"duration"},{default:i(()=>t[14]||(t[14]=[u("Duration (seconds) *")])),_:1,__:[14]}),o("div",et,[s(g,{id:"duration",modelValue:r(e).duration,"onUpdate:modelValue":t[4]||(t[4]=a=>r(e).duration=a),modelModifiers:{number:!0},type:"number",min:"1",max:"3600",placeholder:"180",required:"",class:"flex-1"},null,8,["modelValue"]),o("span",ot,n(y(r(e).duration||0)),1)]),s(b,{message:r(e).errors.duration},null,8,["message"])])]),l.isUploading?(m(),_("div",st,[s(w,{name:"upload",class:"h-4 w-4 animate-spin"}),t[15]||(t[15]=o("span",{class:"text-sm"},"Uploading audio file...",-1))])):c("",!0),r(e).url&&r(e).title?(m(),_("div",rt,[t[16]||(t[16]=o("h4",{class:"font-medium mb-2"},"Updated Preview",-1)),o("div",lt,[o("div",it,[s(w,{name:"music",class:"h-5 w-5 text-primary"})]),o("div",ut,[o("p",at,n(r(e).title),1),o("p",nt,n(r(e).artist),1)]),o("div",dt,n(y(r(e).duration||0)),1)])])):c("",!0),o("div",mt,[s(x,{type:"submit",disabled:r(e).processing||!f(r(e).url)},{default:i(()=>[u(n(r(e).processing?"Updating...":"Update Song"),1)]),_:1},8,["disabled"]),s(r(Y),{href:"/popular-songs"},{default:i(()=>[s(x,{type:"button",variant:"outline"},{default:i(()=>t[17]||(t[17]=[u(" Cancel ")])),_:1,__:[17]})]),_:1})])],32)]),_:1})]),_:1})])]),_:1}))}});export{Ft as default};
