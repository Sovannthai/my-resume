import{d as U,x as k,f as T,o as m,w as i,b as o,e as s,i as u,t as n,h as E,a as _,j as c,u as l,S as Y}from"./app-BGdeDzMo.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-DYWVTCno.js";import{_ as B}from"./Heading.vue_vue_type_script_setup_true_lang-D93NsAQb.js";import{_ as x}from"./index-gMAQ9m9g.js";import{_ as R,a as q}from"./CardContent.vue_vue_type_script_setup_true_lang-BlZqiKPI.js";import{_ as N,a as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-DoiJy3bs.js";import{_ as j}from"./CardHeader.vue_vue_type_script_setup_true_lang-pnZt_IVB.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-DQj82vo9.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-CnHMU76r.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-C46m2rNH.js";import{_ as w}from"./Icon.vue_vue_type_script_setup_true_lang-DoJQpEMP.js";import"./useForwardExpose-Dy3oj9LX.js";import"./RovingFocusGroup-KAP0HzcD.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CMZwfjID.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BEquV88k.js";import"./settings-l7P6_Jkc.js";import"./graduation-cap-Cn59K7Ys.js";import"./sparkles-Dbttn1uA.js";import"./map-pin-DFOroZCC.js";import"./terminal-CcbN7EsC.js";import"./check-BRwFpWMt.js";import"./chevron-down-DSUYhkGP.js";import"./clock-D2DVA13k.js";import"./user-Ct4iyLOq.js";import"./wrench-C3ZzWnG8.js";import"./message-square-BHltFd2A.js";import"./star-RXozBZ6b.js";import"./loader-circle-DHwhFF7o.js";import"./mail-DsOfCvwB.js";import"./sun-D1mqUBOd.js";const z={class:"space-y-6 p-4"},A={class:"p-4 bg-muted rounded-lg"},D={class:"flex items-center gap-3"},L={class:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center"},M={class:"flex-1"},I={class:"font-medium"},Q={class:"text-sm text-muted-foreground"},Z={class:"flex flex-wrap -mx-2"},W={class:"w-full px-2 mb-4"},X={key:0,class:"text-sm text-red-600 mt-1"},F={key:0,class:"w-full px-2 mb-4"},G={class:"p-4 bg-muted rounded-lg"},H={class:"aspect-video bg-black rounded overflow-hidden"},J=["src"],K={class:"w-full sm:w-1/2 px-2 mb-4"},O={class:"w-full sm:w-1/2 px-2 mb-4"},tt={class:"w-full sm:w-1/2 px-2 mb-4"},et={class:"flex items-center gap-4"},ot={class:"text-sm text-muted-foreground"},st={key:0,class:"flex items-center gap-2 p-4 bg-muted rounded-lg"},lt={key:1,class:"p-4 bg-muted rounded-lg"},rt={class:"flex items-center gap-3"},it={class:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center"},ut={class:"flex-1"},at={class:"font-medium"},nt={class:"text-sm text-muted-foreground"},dt={class:"text-sm text-muted-foreground"},mt={class:"flex items-center gap-4"},Mt=U({__name:"Edit",props:{popularSong:{}},setup(h){const d=h,S=[{title:"Dashboard",href:"/dashboard"},{title:"Popular Songs",href:"/popular-songs"},{title:"Edit",href:`/backend/popular-songs/${d.popularSong.id}/edit`}],e=k({title:d.popularSong.title,artist:d.popularSong.artist,url:d.popularSong.url,duration:d.popularSong.duration}),f=r=>/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/.test(r),v=r=>{const t=r.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null},V=()=>{if(e.url&&!f(e.url)&&(e.url.includes("youtube.com")||e.url.includes("youtu.be"))){const r=v(e.url);r&&(e.url=`https://www.youtube.com/watch?v=${r}`)}},y=r=>{const t=Math.floor(r/60),a=r%60;return`${t}:${a.toString().padStart(2,"0")}`},$=()=>{e.put(route("backend.popular-songs.update",d.popularSong.id))};return(r,t)=>(m(),T(C,{breadcrumbs:S},{default:i(()=>[o("div",z,[o("div",null,[s(B,{title:"Edit Song"}),t[5]||(t[5]=o("p",{class:"text-sm text-muted-foreground"}," Update the song information in your music library ",-1))]),s(R,null,{default:i(()=>[s(j,null,{default:i(()=>[s(N,null,{default:i(()=>[u("Edit Song: "+n(r.popularSong.title),1)]),_:1}),s(P,null,{default:i(()=>t[6]||(t[6]=[u(" Update the song details below ")])),_:1,__:[6]})]),_:1}),s(q,null,{default:i(()=>[o("form",{onSubmit:E($,["prevent"]),class:"space-y-6"},[o("div",A,[t[8]||(t[8]=o("h4",{class:"font-medium mb-2"},"Current Song",-1)),o("div",D,[o("div",L,[s(w,{name:"music",class:"h-5 w-5 text-primary"})]),o("div",M,[o("p",I,n(r.popularSong.title),1),o("p",Q,n(r.popularSong.artist),1)]),s(x,{variant:"outline",size:"sm",onClick:t[0]||(t[0]=()=>r.window.open(r.popularSong.url,"_blank")),class:"flex items-center gap-2"},{default:i(()=>[s(w,{name:"external-link",class:"h-4 w-4"}),t[7]||(t[7]=u(" View on YouTube "))]),_:1,__:[7]})])]),o("div",Z,[o("div",W,[s(p,{for:"url"},{default:i(()=>t[9]||(t[9]=[u("YouTube URL *")])),_:1,__:[9]}),s(g,{id:"url",modelValue:l(e).url,"onUpdate:modelValue":t[1]||(t[1]=a=>l(e).url=a),type:"url",placeholder:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",onBlur:V,required:""},null,8,["modelValue"]),t[10]||(t[10]=o("p",{class:"text-sm text-muted-foreground mt-1"}," Enter a YouTube video URL. Supported formats: youtube.com/watch?v=, youtu.be/, youtube.com/embed/ ",-1)),l(e).url&&!f(l(e).url)?(m(),_("div",X," Please enter a valid YouTube URL ")):c("",!0),s(b,{message:l(e).errors.url},null,8,["message"])]),l(e).url&&f(l(e).url)?(m(),_("div",F,[s(p,null,{default:i(()=>t[11]||(t[11]=[u("YouTube Preview")])),_:1,__:[11]}),o("div",G,[o("div",H,[o("iframe",{src:`https://www.youtube.com/embed/${v(l(e).url)}?rel=0`,class:"w-full h-full",frameborder:"0",allowfullscreen:""},null,8,J)])])])):c("",!0),o("div",K,[s(p,{for:"title"},{default:i(()=>t[12]||(t[12]=[u("Song Title *")])),_:1,__:[12]}),s(g,{id:"title",modelValue:l(e).title,"onUpdate:modelValue":t[2]||(t[2]=a=>l(e).title=a),type:"text",placeholder:"Enter song title",required:"",autofocus:""},null,8,["modelValue"]),s(b,{message:l(e).errors.title},null,8,["message"])]),o("div",O,[s(p,{for:"artist"},{default:i(()=>t[13]||(t[13]=[u("Artist *")])),_:1,__:[13]}),s(g,{id:"artist",modelValue:l(e).artist,"onUpdate:modelValue":t[3]||(t[3]=a=>l(e).artist=a),type:"text",placeholder:"Enter artist name",required:""},null,8,["modelValue"]),s(b,{message:l(e).errors.artist},null,8,["message"])]),o("div",tt,[s(p,{for:"duration"},{default:i(()=>t[14]||(t[14]=[u("Duration (seconds) *")])),_:1,__:[14]}),o("div",et,[s(g,{id:"duration",modelValue:l(e).duration,"onUpdate:modelValue":t[4]||(t[4]=a=>l(e).duration=a),modelModifiers:{number:!0},type:"number",min:"1",max:"3600",placeholder:"180",required:"",class:"flex-1"},null,8,["modelValue"]),o("span",ot,n(y(l(e).duration||0)),1)]),s(b,{message:l(e).errors.duration},null,8,["message"])])]),r.isUploading?(m(),_("div",st,[s(w,{name:"upload",class:"h-4 w-4 animate-spin"}),t[15]||(t[15]=o("span",{class:"text-sm"},"Uploading audio file...",-1))])):c("",!0),l(e).url&&l(e).title?(m(),_("div",lt,[t[16]||(t[16]=o("h4",{class:"font-medium mb-2"},"Updated Preview",-1)),o("div",rt,[o("div",it,[s(w,{name:"music",class:"h-5 w-5 text-primary"})]),o("div",ut,[o("p",at,n(l(e).title),1),o("p",nt,n(l(e).artist),1)]),o("div",dt,n(y(l(e).duration||0)),1)])])):c("",!0),o("div",mt,[s(x,{type:"submit",disabled:l(e).processing||!f(l(e).url)},{default:i(()=>[u(n(l(e).processing?"Updating...":"Update Song"),1)]),_:1},8,["disabled"]),s(l(Y),{href:"/popular-songs"},{default:i(()=>[s(x,{type:"button",variant:"outline"},{default:i(()=>t[17]||(t[17]=[u(" Cancel ")])),_:1,__:[17]})]),_:1})])],32)]),_:1})]),_:1})])]),_:1}))}});export{Mt as default};
